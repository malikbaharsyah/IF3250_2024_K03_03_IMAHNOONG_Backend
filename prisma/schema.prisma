generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admin {
  id               Int         @id @default(autoincrement())
  username         String      @unique
  password         String
  isSuperAdmin     Boolean     @default(false)
  imageProfilePath String?
  email            String
  planetariumId    Int
  Planetarium      Planetarium @relation(fields: [planetariumId], references: [id])
}

model Planetarium {
  id                  Int             @id @default(autoincrement())
  namaPlanetarium     String
  deskripsi           String
  imagePath           String[]
  lokasi              String
  rating              String?
  noTelepon           String          @default("+62 812-3456-7890")
  prosedurPendaftaran String          @default("")
  tataTertib          String          @default("")
  Admin               Admin[]
  Jadwal              Jadwal[]
  Request             Request[]
  Review              Review[]
  jadwalDefault       jadwalDefault[]
}

model Tiket {
  id           String    @id @unique @default(cuid())
  namaPemesan  String
  jumlahTiket  Int
  noTelepon    String
  email        String
  idJadwal     Int?
  idRequest    Int?
  waktuDibayar DateTime?
  waktuDibuat  DateTime  @default(now())
  statusTiket  String
  Jadwal       Jadwal?   @relation(fields: [idJadwal], references: [id])
  Request      Request?  @relation(fields: [idRequest], references: [id])
}

model Jadwal {
  id              Int            @id @default(autoincrement())
  namaJadwal      String
  waktuKunjungan  DateTime
  kapasitas       Int
  hargaTiket      Int
  planetariumId   Int
  deskripsiJadwal String
  imagePath       String[]
  durasi          Int            @default(60)
  isDefault       Boolean        @default(false)
  jadwalDefaultId Int?
  jadwalDefault   jadwalDefault? @relation(fields: [jadwalDefaultId], references: [id])
  Planetarium     Planetarium    @relation(fields: [planetariumId], references: [id])
  Tiket           Tiket[]
}

model Review {
  reviewId      Int         @id @default(autoincrement())
  komentar      String
  rating        Int
  nama          String?
  planetariumId Int
  Planetarium   Planetarium @relation(fields: [planetariumId], references: [id])
}

model Log {
  logId           Int      @id @default(autoincrement())
  waktuPencatatan DateTime
  deskripsi       String
  ipAddress       String
  endpoint        String
}

model Request {
  id             Int         @id @default(autoincrement())
  planetariumId  Int
  namaPemesan    String
  jumlahTiket    Int
  email          String
  note           String
  konfirmasi     Boolean     @default(false)
  noTelepon      String
  waktuDibuat    DateTime    @default(now())
  waktuKunjungan DateTime
  Planetarium    Planetarium @relation(fields: [planetariumId], references: [id])
  Tiket          Tiket[]
}

model jadwalDefault {
  id              Int         @id @default(autoincrement())
  namaJadwal      String
  hari            String
  jam             String
  kapasitas       Int
  hargaTiket      Int
  planetariumId   Int
  deskripsiJadwal String
  durasi          Int         @default(60)
  Jadwal          Jadwal[]
  Planetarium     Planetarium @relation(fields: [planetariumId], references: [id])
}
